<!DOCTYPE html>
<html lang="en">
<head>
    
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1,">
    <title> Trello Clone </title>
    <link href='style.css'rel="stylesheet">
    <link href='css/all.css' rel="stylesheet">
    <script src="js/j-query-3.5.js"></script>
    <script>
     const electron=require("electron");
     const ipc = electron.ipcRenderer;
     const prompt = require('electron-prompt')
      document.addEventListener("DOMContentLoaded", function(){
        ipc.send("Logon_loaded")
        ipc.on("Fname", function(evt,result){ //this will send db results back from main
          // alert(result[0].Password.toString()); This works but taken out for debuggin
          //Note need to do below code in order for javascript to interact with elements in the DOM
          create1=document.getElementById("create1")
          create2=document.getElementById("create2")
          create3=document.getElementById("create3")
          create_four=document.getElementById("create_four")
          list1=document.getElementById("list1")
          list2=document.getElementById("list2")
          list3=document.getElementById("list3")
          list4=document.getElementById("list_4")
          list1_1=document.getElementById("list1_1")
          list1_2=document.getElementById("list1_2")
          
          list1_3=document.getElementById("list1_3")
          list1_4=document.getElementById("list1_4")
          list1_5=document.getElementById("list1_5")
          list1_6=document.getElementById("list1_6")
          list2_1=document.getElementById("list2_1")
          list2_2=document.getElementById("list2_2")
          list2_3=document.getElementById("list2_3")
          list2_4=document.getElementById("list2_4")
          list2_5=document.getElementById("list2_5")
          list2_6=document.getElementById("list2_6")
          list3_1=document.getElementById("list3_1")
          list3_2=document.getElementById("list3_2")
          list3_3=document.getElementById("list3_3")
          list3_4=document.getElementById("list3_4")
          list3_5=document.getElementById("list3_5")
          list3_6=document.getElementById("list3_6")
          list4_1=document.getElementById("list4_1")
          list4_2=document.getElementById("list4_2")
          list4_3=document.getElementById("list4_3")
          list4_4=document.getElementById("list4_4")
          
        // TESTING Dynamic APPROACH
        items={"list1_1":list1_1,"list1_2":list1_2,"list1_3":list1_3,"list1_4":list1_4,"list1_5":list1_5,"list1:6":list1_6,"list2_1":list2_1,"list2_2":list2_2,"list2_3":list2_3,"list2_4":list2_4,"list2_5":list2_5,"list2_6":list2_6,"list3_1":list3_1,"list3_2":list3_2,"list3_3":list3_3,"list3_4":list3_4,"list3_5":list3_5,"list3_6":list3_6,"list4_1":list4_1, "list4_2":list4_2, "list4_3":list4_3, "list4_4":list4_4}
        console.log("In LIST FOUR")
        console.log(result[0].List4_1)
        console.log("<< 4_1")
        All=["list1_1","list1_2","list1_3","list1_4","list1_5","list1_6","list2_1","list2_2","list2_3","list2_4","list2_5","list2_6","list3_1","list3_2","list3_3","list3_4","list3_5","list3_6","list4_1","list4_2","list4_3","list4_4"]
        lists={"list1":"list1_1", "list2":"list2_1","list3":"list3_1", "list4":"list4_1"}
        var create_items={"list1":"create1", "list2":"create2","list3":"create3","list4":"create_four"}
        for(const[key, val] of Object.entries(lists)){
           console.log(key, val)
           console.log(result[0][val] + " <<<<<<< WHAT WORKING WITH")
            if (result[0][val]){
              console.log("VAL +" + val + "FOUND!")
              
              console.log("key:" + typeof(key))
              
              for(const[key2, val2] of Object.entries(create_items)){
                console.log(key+"KEYKEKYEYKEEKEKEKYE")
                if(key==key2){
                  if(key=="list1"){
                    list1.style.display="block"
                    create1.style.display="none"
                  }
                  if(key=="list2"){
                    list2.style.display="block"
                    create2.style.display="none"
                  }
                  if(key=="list3"){
                    list3.style.display="block"
                    create3.style.display="none"
                  }
                  if (key=="list4"){
                    list_4.style.display="block"
                    create_four.style.display="none"
                  }
                  
                }
            }
            }
          }
            for(var i=0; i < All.length;i++){
                 item=All[i]
                 nextitem=All[i+1]
                 for(const[key, val] of Object.entries(items)){
                                if(key==item){
                                  useval=val
                                  console.log("Result>>")
                                  console.log(result[0][item])
                                }
                                  
                 }
                  
                   if(result[0][item]){
                        console.log(item + "NOT empty")
                        console.log("useval =" +useval)
                        useval.style="display:block"
                        useval.innerHTML=result[0][item]
                        //useval.insertAdjacentHTML( 'afterend',"<p> <i class= 'fas fa-plus list_i' style='text-align:center;size:2px;color:black;margin-right:2px; padding:0' ></i></p>")
                        
                        try{
                        useval.parentNode.style="display:block"
                        
                       
                        
                        
                        }
                        catch{
                            console.log("unable to set parent node of " + item)
                        } //ADD minus and plus signs (latter only if isnt last) + event listeners
                        try{
                        console.log(nextitem[4] )
                        console.log(item[4])
                        console.log("<<< nexitem and item 4")
                       //   // this should check if current item and next item are NOT in the same list AND that current item does not have 6 at end (i.e is last permissible item)
                        console.log("<><><><><")
                        console.log("nextitem:" + nextitem)
                        console.log("<><><><<>><")
                       if(result[0][nextitem]=="" && item[6]!="6"){
                        useval.insertAdjacentHTML( 'afterend',`<p> <i class= 'fas fa-plus item_plus' id= ${nextitem} style='float:left;text-align:center;size:2px;color:black;margin-right:2px; padding:0' ></i></p>`)
                        useval.insertAdjacentHTML( 'afterend',"<p> <i class= 'fas fa-minus list_i' style='float:right;text-align:center;size:2px;color:black;margin-right:2px; padding:0' ></i></p>")
                       }
                       if(item[6]=="6"){
                          console.log(nextitem[4] + "<<next item [4")
                          console.log(item[4]+"<<item[4")
                          console.log(item[6] + "<<<item[-1]")
                          console.log('unequal and item last not 6')
                          
                          
                          

                        }
                        }
                        catch{

                        }
                   }
                
          
            }
            document.querySelectorAll(".item_plus").forEach(item=>{
              item.addEventListener('click',function(){
         prompt({
         title: 'New Item',
         label: 'Please Enter New Item:',
         value: '',
         inputAttrs: {
             type: 'text'
         },
         type: 'input'
     })
     .then((r) => {
         if(r === null) {
             console.log('user cancelled');
             console.log(item.id)
             console.log("<<<<<< ITEM ID")
         } else {
             console.log('result', r);
             console.log(item.id)
             console.log("<<<<<< ITEM ID")
             ipc.send("New_List",[ r, item.id])
         }
        })})

            })
        //list_4.style.display="block"
        
        
        },)},)
    </script>
 </head>
 <body>
 	
 <div class="top-nav">
 	<ul>
 	<li> Home </li>
 	<li> New </li>
 	<li> Options <ul> <li id="Background"> Background </li> <li> Delete </li> </ul></li>
 </ul>
  <li style="float:right"> <i class=" fas fa-plus"></i></li>


 </div> <!--- Top Nav ends --->
 <div class="wrapper">
  <div class="container">
    <p id="create1" style="display:block"> <i class=" fas fa-plus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
  <div class="list" id="list1" style="display:none">
  	<h1> List One </h1>
    <div class="item" id="list1_1" style="display:none" >
    	<p  style="display:none">  <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i></p>
    </div>
    <div class="item" id="list1_2" style="display:none" >
    	<p  style="display:none"><i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
    <div class="item" id="list1_3" style="display:none">
    	<p  style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i></p>
    </div>
    <div class="item" id="list1_4" style="display:none" >
    	<p  style="display:none"><i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
    <div class="item" id="list1_5" style="display:none" >
    	<p  style="display:none"><i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
    <div class="item" id="list1_6" style="display:none" >
    	<p  style="display:none"><i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
    
  </div> <!--- Change below to only display when there are list items-->
  </div>
  <div class="container">
    <p id="create2" style="display:block"> <i class=" fas fa-plus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
  <div class="list" id="list2" style="display:none">
  	<h1> List Two </h1>
      <div class="item" id="list2_1" style="display: none;">
      	<p style="display:none"> <i class=" fas fa-minus list_i" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
      </div>
      <div class="item" id="list2_2" style="display: none;">
      	<p  style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
      </div>
      <div class="item" id="list2_3" style="display: none;">
      	<p  style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
      </div>
      <div class="item" id="list2_4" style="display: none;">
      	<p  style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
      </div>
      <div class="item" id="list2_5" style="display: none;">
      	<p  style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
      </div>
      <div class="item" id="list2_6"  style="display: none;">
      	<p  style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
      </div>
      </div>
       
      
  </div>
  <div class="container">
    <p id="create3" style="display:block"> <i class=" fas fa-plus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>

  <div class="list"id="list3"style="display:none">
    <h1> List Three </h1>
    <div class="item" id="list3_1" style="display: none;">
      <p  style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
    <div class="item" id="list3_2" style="display: none;">
      <p  style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
    <div class="item" id="list3_3" style="display: none;">
      <p  style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
    <div class="item" id="list3_4" style="display: none;">
      <p  style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
    <div class="item" id="list3_5" style="display: none;">
      <p  style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
    <div class="item" id="list3_6" style="display: none;">
      <p  style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
  </div>
  </div>
  <div class="container">

    <p id="create_four" style="display:block"> <i class=" fas fa-plus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
  <div class="list" id="list_4" style="display:none">
    <h1> List Four </h1>
    <div class="item" id="list4_1" style="display: none;">
      <p id="item2" style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
    <div class="item" id="list4_2" style="display: none;">
      <p id="item2" style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
    <div class="item" id="list4_3" style="display: none;">
      <p id="item2" style="display:none"> <i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
    <div class="item" id="list4_4"style="display:none">
      <p id="item2" style="display: none;"><i class=" fas fa-minus" style="float:right;size:2px;color:black;margin-right:2px; padding:0" ></i> </p>
    </div>
    </div>
    
       
      

   
  </div>
</div>
 </div> 
 </div> 
 <footer>

 </footer> 



 </body>

 <script> 
  
  
   document.getElementById("Background").addEventListener("click", function(){
 	
 	var img = document.body
    style = img.currentStyle || window.getComputedStyle(img, false),
    bi = style.backgroundImage.slice(4, -1);
    bislice= bi.split("/") // splits the string into an array where each element has / as the delimited (this char is REMOVEd though)
    newurl=""+bislice[9]; //takes the last TWO in the array - the end of the url file - and adds a / back in to make a proper file path
    console.log(newurl);
    str = newurl.replace(/^"|"$/g, ''); // Regex strips double quotes
    
    console.log(str)
 	if (str==="earth.jpg"){
 	console.log("detected Earth");
 	document.body.style.backgroundImage="url(imgs/trees.jpg)";}
 	else if (str=== "trees.jpg"){
    document.body.style.backgroundImage="url(imgs/evening.jpg)";
    console.log("detected trees")
    console.log(document.body.style.backgroundImage)
 	}
 	else if (str=="evening.jpg") {
 		document.body.style.backgroundImage="url(imgs/space.jpg)"
 	}
 	else if (str=="space.jpg"){
         document.body.style.backgroundImage="url(imgs/trees.jpg)"
 	}
 	

 }); </script>
         
 </html>